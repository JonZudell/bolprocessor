2007-01-30	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* resources/BP2-MacOS.rsrc:
	* source/BP2/-BP2.h:
		Conditionalized About alert depending on Carbon/WASTE/TextEdit.
		
	* resources/BP2-MacOS.rsrc:
		Changed dialog windows that were of the old "rounded corners" desk
			accessory type to Carbon-compliant WDEFs.
		Removed alert, dialog, menu, and window color table resources.
		
	* source/BP2/Inits.c (MakeWindows):
		Added Appearance call for Carbon to make dialogs use system colors.
	
	* source/BP2/MIDIstuff.c (ListenMIDI):
		Fixed infinite loop when Beta == true and no Midi.
	
2007-01-29	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/CarbonCompatUtil.c:
		Finished replacements for old Scrap Manager calls.
	
	* source/BP2/MenuCommands.c (mEnterFind):
		Don't add null char to scrap; fixed possible memory leak.

2007-01-26	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/BP2main.c:  Reconditionalizing driver closing calls.
		
	* source/BP2/MenuCommands.c:  Conditionalize out calls to FixPort().
	
	* source/BP2/SaveLoads1.c (SaveSettings & LoadSettings):
		Conditionalize OMS code.  Force OutMIDI & Oms false when not available.
	
	* source/BP2/MIDIdrivers.c:
	* source/BP2/MIDIstuff.c:
		Moved CheckMIDIbytes() to MIDIstuff.c since it is a "high-level" routine.
		
	* source/BP2/MIDIstubs.c:
		New functions to replace "high-level" MIDI interface in MIDIdrivers.c.

	* source/prefix/PrefixCarbonTextEdit.h:
		Set WITH_REAL_TIME_MIDI to enable the Null Midi driver on Carbon.
		
	** 12:44 PM EST -- Compiles and links with CarbonLib !! **

	* source/BP2/Inits.c (SetUpMenus):
		Don't add Apple menu items under Carbon.
		Remove Quit & separator from File menu on OS X.
	
	* resources/carb.r:
	* resources/plst-resource.plc:
		New files for 'carb' and 'plst' resources so that BP will launch 
			as a native OS X application.

	* BP2-MacOS.cw8.mcp:
		Updated Carbon targets for new files; configured Property List 
			Compiler settings.

2007-01-25	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/-BP2proto.h:
		Divided up MIDI functions prototypes based on driver availability and
			which ones are needed for any MIDI functionality.

2007-01-23	Anthony Kozar	<anthonykozar@sbcglobal.net>
(committed on 2007-01-25)
	
	* source/BP2/Inits.c (Inits):
		Replaced NewAEEventHandlerProc() with NewAEEventHandlerUPP().
	
	* source/BP2/AppleEvents.c:
		Added const qualifier to first parameter of all AEvent handlers.
	
	* source/BP2/Inits.c (Inits):
	* source/BP2/Interface1.c (DoContent):
		Moved allocation of ControlActionUPPs to Inits() to avoid memory leaks.
	
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
		New globals (vScrollUPP & hScrollUPP) for scroll bar ControlActionUPPs.
	
	* source/BP2/MIDIdrivers.c:
	* source/BP2/MIDIstuff.c:
		Moved ResetMIDIFilter() from MidiDrivers.c to MIDIstuff.c.

	* source/BP2/MIDIstubs.c:
		Non-realtime replacement for GetDriverTime().
		
	* source/BP2/-BP2proto.h:
		Changes to RT Midi conditionalization.
	
	* source/BP2/Compute.c:
	* source/BP2/Dialogs.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/MakeSound.c:
	* source/BP2/MenuCommands.c:
	* source/BP2/MIDIloads.c:
	* source/BP2/MIDIstuff.c:
	* source/BP2/Misc.c:
	* source/BP2/Polymetric.c:
	* source/BP2/ProduceItems.c:
	* source/BP2/SaveLoads1.c:
	* source/BP2/Script.c:
	* source/BP2/ScriptUtils.c:
	* source/BP2/Ticks.c:
		Attempting to conditionalize out more real-time midi code.  This
			approach needs more thought though and I may reverse some of
			these changes.
	
2007-01-22	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
		Replaced [Enable|Disable]Item() with [Enable|Disable]MenuItem() and
			CheckItem() with CheckMenuItem().
	
	* source/BP2/Script.c:
		Replaced CountMItems() with CountMenuItems().
		Fixed GetMenu() memory leak by using GetMenuHandle() instead.
		
	* source/BP2/-BP2.proto.h:
		Backwards compatibility macros for [Enable|Disable]MenuItem so that we
			don't have to require OS 8.5 for the non-Carbon build.
	
	* source/BP2/Misc.c (Date):	
		Replaced IUTimeString() with TimeString(); other calls OK.

	* source/BP2/SaveLoads3.c (NewFile & OldFile):
		Conditionalized opening & saving files on Carbon to fail until we
			can finish Navigation Services support.
	
	* source/BP2/NavServWrapper.[c|h]:
		New files that create a single API for Standard File Package & 
			Navigation Services (not done yet).
		
	* source/BP2/CarbonCompatUtil.[c|h]:
		New files for cross-API compatibility including Scrap Manager.
	
	* source/BP2/MenuCommands.c:
	* source/BP2/SaveLoads1.c:
	* source/BP2/SaveLoads2.c:
		Replaced ZeroScrap(), GetScrap(), and PutScrap() with new functions 
			in CarbonCompatUtil.c.

2007-01-19	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/-BP2.h:
	* source/BP2/Inits.c:
	* source/BP2/Print.c:
		Removed "Qd." macros and fixed the Transitional build.
	
	* source/BP2/BP2main.c (main):  Commented out NewGrowZoneProc() call.
	* source/BP2/BP2main.c (MyGrowZone):  Conditionalized for !__POWERPC.
	
	* source/BP2/Processes.c (CallUser): Commented out unused NM code.
	
	* source/BP2/-BP2.proto.h:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/MenuCommands.c:
		Conditionalizing more of the OMS code.
		
	* source/BP2/MIDIstubs.c:  New file with stubs for needed MIDI routines.
	
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
	* source/BP2/Inits.c:
	* source/BP2/MIDIfiles.c:
	* source/BP2/ProduceItems.c:
	* source/BP2/SaveLoads3.c:
		Replaced FSDelete() with FSpDelete(), using FSMakeFSSpec() as needed.
		New global for saving MIDIfileSpec.

2007-01-18	Anthony Kozar	<anthonykozar@sbcglobal.net>

	* source/BP2/Color.c:
	* source/BP2/Graphic.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/MenuCommands.c:
	* source/BP2/Misc.c:
		Replaced InvalRect() with InvalWindowRect() and ValidRect() with 
			ValidWindowRect().

	* source/BP2/-BP2.proto.h:
		Backwards compatibility macros for [Inval|Valid]WindowRect so that we
			don't have to require OS 8.5 for the non-Carbon build.
	
	* source/BP2/Inits.c:  Reinstated MoreMasters() for non-Carbon build and
		conditionalized to MoreMasterPointers() for Carbon.
	
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
	* source/BP2/Inits.c:  
		New global: RunningOnOSX; Moved GoodMachine() call near beginning of
			Inits() and it now checks whether we are on OS 8/9 or OS X.
	
	* source/BP2/-BP2.h:
	* source/BP2/BP2main.c:
	* source/BP2/Graphic.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/MakeSound.c:
	* source/BP2/MenuCommands.c:
	* source/BP2/MIDIstuff.c:
	* source/BP2/Print.c:
	* source/BP2/SaveLoads1.c:
		Converted QuickDraw globals to Carbon accessor functions.

2007-01-17	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Graphic.c:
	* source/BP2/TimeSet.c:
		Enabled SHOWEVERYTHING & DISPLAY_PHASE_DIAGRAM compile-time flags to
			be set externally.
	
	* source/BP2/-BP2.proto.h:
	* source/BP2/Strings.c:
	* source/BP2/Inits.c:
	* source/BP2/SaveLoads1.c:
	* source/BP2/SaveLoads2.c:
	* source/BP2/SaveLoads3.c:
		Replaced pStrCopy(char*,Str255) with CopyPString(Str255,Str255).
	
	* resources/BP2-MacOS.rsrc:
		Unset "System Heap" bit on affected resources.
		Changed version to 2.9.6 development.
		
	* resources/MacOSFinderHelp.r:
		New file to define 'kind' and Balloon help resources for OS 9 Finder.
	
	* source/BP2/MenuCommands.c:
	* source/BP2/Inits.c:
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
		Conditionalized out printing on Carbon.
	
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/Translit.c:
		Conditionalized SystemTask(), SystemClick(), and OpenDeskAcc() calls.
	
	* source/BP2/-BP2.h:
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
	* source/BP2/GetRelease.c:
	* source/BP2/Inits.c:
	* source/BP2/Misc.c:
		More conditionalization of real-time MIDI & scheduler code.

2007-01-16	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/-BP2.h:  Temporary fix for lack of StandardFile types.
	
	* source/BP2/AppleEvents.c:
	* source/BP2/Inits.c:
		Conditionalize out Edition Manager aevents.

	* source/BP2/-BP2.proto.h:
	* source/BP2/AppleEvents.c:
	* source/BP2/Color.c:
	* source/BP2/CsoundScoreMake.c:
	* source/BP2/Graphic.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/MakeSound.c:
	* source/BP2/MenuCommands.c:
	* source/BP2/MIDIfiles.c:
	* source/BP2/MIDIloads.c:
	* source/BP2/Misc.c:
	* source/BP2/Processes.c:
	* source/BP2/SaveLoads1.c:
	* source/BP2/SaveLoads2.c:
	* source/BP2/SaveLoads3.c:
	* source/BP2/Script.c:
	* source/BP2/ScriptUtils.c:
	* source/BP2/Strings.c:
	* source/BP2/Ticks.c:
	* source/BP2/Translit.c:
		Convert c2pstr() calls to Carbon-compatible equivalents.

2007-01-15	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/BP2main.c:
	* source/BP2/WindowText.c:
		Minor fixes for compiling without WASTE.
	
	* BP2-MacOS.cw8.mcp: New targets for CarbonAccessors/TextEdit, Carbon/WASTE,
			and Carbon/TextEdit builds.
		
	* source/prefix/PrefixTransTextEdit.h:
	* source/prefix/PrefixTransWASTE.h:
	* source/prefix/PrefixCarbonTextEdit.h:
	* source/prefix/PrefixCarbonWASTE.h:
		New prefix files that set BP2 compile options for Transitional & 
		Carbon targets.

	* source/BP2/-BP2.h:
	* source/BP2/-BP2.proto.h:
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
	* source/BP2/midi1.h:
		Added preprocessor "guards" for each file.
		Made it possible to set BP2 compile-time options in another file
			while retaining the default settings if undefined.
		Began to conditionalize for Carbon and no real-time MIDI.

	* source/BP2/Dialogs.c:
	* source/BP2/GetRelease.c:
	* source/BP2/Graphic.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/MIDIdrivers.c:
	* source/BP2/SaveLoads1.c:
		Removed unnecessary or dangerous casts to WindowPtr, DialogPtr, GrafPtr.

	* source/BP2/Inits.c:  Replaced LMGetMBarHeight with GetMBarHeight.
	
	* source/BP2/BP2main.c:
	* source/BP2/Inits.c:
		Began to conditionalize real-time MIDI code.
		Conditionalized some Toolbox calls in main() and Inits() that are
			obsolete in Carbon.

2007-01-13	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/Inits.c:
		Converted for CarbonAccessors.

	* source/BP2/Print.c:
		Can't convert since OPAQUE_TOOLBOX_STRUCTS makes it impossible.
		Will need to completely replace this code for the real Carbon build.
		
2007-01-12	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Dialogs.c:
	* source/BP2/MenuCommands.c:
	* source/BP2/Misc.c:
		Replaced Window[wRandomSequence] with gpDialogs[wRandomSequence].
		Replaced Window[wFindReplace] with gpDialogs[wFindReplace].
		Replaced Window[wTickDialog] with gpDialogs[wTickDialog].
		Converted for CarbonAccessors.

	* source/BP2/Interface1.c:
		Partially converted for CarbonAccessors.
		
2007-01-10	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Arithmetic.c:
	* source/BP2/Automata.c:
	* source/BP2/CompileProcs.c:
	* source/BP2/CsoundMaths.c:
	* source/BP2/CsoundScoreMake.c:
	* source/BP2/DisplayThings.c:
	* source/BP2/FillPhaseDiagram.c:
	* source/BP2/Glossary.c:
	* source/BP2/HTML.c:
	* source/BP2/Interaction.c:
	* source/BP2/MIDIdrivers.c:
	* source/BP2/MIDIfiles.c:
	* source/BP2/MIDIstuff.c:
	* source/BP2/Processes.c:
	* source/BP2/ProduceItems.c:
	* source/BP2/SaveLoads2.c:
	* source/BP2/SaveLoads3.c:
	* source/BP2/Schedule.c:
	* source/BP2/ScriptAlgo.c:
	* source/BP2/ScriptUtils.c:
	* source/BP2/SetObjectFeatures.c:
	* source/BP2/SoundObjects1.c:
	* source/BP2/SoundObjects2.c:
	* source/BP2/SoundObjects3.c:
	* source/BP2/Strings.c:
	* source/BP2/Ticks.c:
	* source/BP2/TimeSet.c:
	* source/BP2/TimeSetFunctions.c:
	* source/BP2/Zouleb.c:
		Switched to CarbonAccessors (no conversion necessary).

	* source/BP2/AppleEvents.c:
	* source/BP2/Color.c:
	* source/BP2/CompileGrammar.c:
	* source/BP2/Compute.c:
	* source/BP2/Csound.c:
	* source/BP2/DisplayArg.c:
	* source/BP2/Encode.c:
	* source/BP2/GetRelease.c:
	* source/BP2/Graphic.c:
	* source/BP2/MakeSound.c:
	* source/BP2/MIDIloads.c:
	* source/BP2/OMS.c:
	* source/BP2/PlayThings.c:
	* source/BP2/Polymetric.c:
	* source/BP2/SaveLoads1.c:
	* source/BP2/Script.c:
	* source/BP2/Translit.c:
		Converted for CarbonAccessors.

	* source/BP2/WindowText.c: Partially converted for WASTE true.
	

2007-01-09	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/BP2main.c: Converted for CarbonAccessors.
	
	* source/BP2/-BP2.h: Set BIGTEST and COMPILING_BETA to 1 for now.
	
	* source/BP2/-BP2decl.h:
	* source/BP2/-BP2main.h:
	* source/BP2/BP2main.c:
	* source/BP2/Dialogs.c:
	* source/BP2/GetRelease.c:
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
	* source/BP2/Interface2.c:
	* source/BP2/Misc.c:
	* source/BP2/Strings.c:
	* source/BP2/Ticks.c:
		Modified to not allocate space for (most) windows and dialogs.
		Now using DialogPtrs everywhere instead of DialogRecords.
		Changed some WindowPtrs to DialogPtrs as appropriate.
		DRecord[] renamed to gpDialogs[].
		Duplicating pointers between Window[] and gpDialogs[] for now, but
			should be changed to be independent everywhere.

2007-01-08	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* BP2-MacOS.cw8.mcp: New target for Carbon Transitional build.
	
	* (all files in source/BP2/ and source/WASTE):
		Added per file #includes for MacHeaders.h or MacHeadersTransitional.h
		
	* (all files in source/BP2/ and source/additional):
		Added copyright statement and license.
	
2007-01-05	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Inits.c:
	* source/BP2/Interface1.c:
		#ifdefed out CheckRegistration(), Y2K(), and MakeNewKeyFile().
		
	* BP2-MacOS.cw8.mcp: New project file for CodeWarrior pro 8.
	
	* (36 files in source/BP2/):
		Renamed ActivateWindow() to BPActivateWindow() and
		GetWindowIndex() to BPGetWindowIndex() and 
		FileType[] to gFileType[] to avoid conflicts with Univ. Headers 3.4.2.
		Everything now compiles with CodeWarrior 8 and UH 3.4.2.

2007-01-02	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* VERSION 2.9.5 (FINAL)
	
	* BP2 help: Updated entries for "Where can I get the latest version of BP2?"
		and "Where can I find more information?"

	* BP2 help: Added entries for "License" and "free software".

	* resources/BP2-MacOS.rsrc: 
		Updated version resource & date in the about alert.
		Fixed coloring of menu items in the File menu.

	* source/BP2/-BP2.h:
	* source/BP2/-BP2main.h:
	* source/BP2/Inits.c:
		Added "BP2.9.5" to VersionName and updated IDSTRING, MAXVERSION, and
		Version defines/globals.
		New #define COMPILING_BETA to set Beta global.  (May move to prefix file).

	* source/BP2/BP2main.c (main): Commented out the call to Y2K().

2006-06-06	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/BP2main.c (main):
	* source/BP2/MenuCommands.c (mAbout):
	* source/BP2/Dialogs.c (DoDialog):
		Disabled the registration system.  Modified "Register" buttons in 
		opening and about alerts so that they read "License" and display the
		"License.txt" file.  Disabled launching the Kagi "Register" app.
	
	* BP2 help: Updated FAQ entry for "How do I register for BP2?"
	
	* resources/BP2-MacOS.rsrc: Updated info in the about alert.

2006-06-05	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* source/BP2/Strings.c (MystrcpyHandleToString):  Fixed a buffer overrun bug.

	* data/Thierry_Montaudon/-or.piano: Moved to data/Harm_Visser.

	* New ChangeLog file :)

2006-06-02	Anthony Kozar	<anthonykozar@sbcglobal.net>
	* Many more example files added to new directories:
		bolprocessor/data/Harm_Visser
		bolprocessor/data/Jerome_Demolliens
		bolprocessor/data/Thierry_Montaudon

	* New CVS module, QAVAID, containing the Prolog II code and projects
	  from Bernard that create grammars from sets of musical examples.
